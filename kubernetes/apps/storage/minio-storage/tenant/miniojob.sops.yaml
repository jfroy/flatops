apiVersion: job.min.io/v1alpha1
kind: MinIOJob
metadata:
    name: create-sa-volsync
spec:
    serviceAccountName: mc-job-sa
    tenant:
        name: minio
        namespace: storage
    commands:
        - name: add-user-volsync
          op: admin/user/add
          args:
            user: volsync
            password: ENC[AES256_GCM,data:2jPvDkHic9yFNw3n4SdF,iv:DtjFNxla9rZj3RJJ7gkCvZrQs1CsET5piNij0Osr9SI=,tag:xODmcYGHlnM3ay0yKgJ/Jg==,type:str]
        - name: add-policy-volsync
          op: admin/policy/create
          args:
            name: volsync-access
            policy: |
                {
                    "Version": "2012-10-17",
                    "Statement": [
                        {
                            "Effect": "Allow",
                            "Action": [
                                "s3:*"
                            ],
                            "Resource": [
                                "arn:aws:s3:::volsync",
                                "arn:aws:s3:::volsync/*"
                            ]
                        }
                    ]
                }
        - op: admin/policy/attach
          dependsOn:
            - add-user-volsync
            - add-policy-volsync
          args:
            policy: volsync-access
            user: volsync
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1u006cywqm39pr9zgh2hn0svnry5gs2ayhrtxucz77qc7j88kmqzqxtxz0t
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB0ZzdLWlZKTFBqRDBwS3Ro
            OEZBR2pjRFkzZmNvZDZtMTBTNDErTnVKVTNFClNPVWRqV29mOHJmYWFEMm1ieGVa
            MWRmbzRQWnFJNldsTG1ScVZaemo2OUUKLS0tIHZZOUZDeHBaZU1RUzBDMHpuSldK
            cHE1WFhqbzBhSjNHbGdvQWNNUGZ6bE0KwkWuWq0RET24obJzzI2MR/iTNGq7wb0t
            weCAmsPBQYYVA+iVooT2QKR53T9ahGCAsjybzrxsWDeelNyM4p3rAg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-06-03T03:15:06Z"
    mac: ENC[AES256_GCM,data:epZvacJ8kKOwVJYqVmXz/zxNEzQitGOvauBIJGZQAhc8vd6VotSbr8nY8skMYMx7VJrFVD90XHyIJBnkfckXCObgQ7dYFGODqX8f+jitZbYg+yXW+1xa7oP5rMB7SStAp0526tXoiyBCJH9ixXojKeOdFlV9FgkDLgz9vfRq/RE=,iv:juYSTxzDBUY9zhqwl41FWY5TBVLE+P3ZSi50Vot/j/k=,tag:xblDc8xsoB8vH5bjwA2iYw==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|password)$
    version: 3.8.1
---
apiVersion: job.min.io/v1alpha1
kind: MinIOJob
metadata:
    name: create-sa-postgres16
spec:
    serviceAccountName: mc-job-sa
    tenant:
        name: minio
        namespace: storage
    commands:
        - name: add-user-postgres16
          op: admin/user/add
          args:
            user: postgres16
            password: ENC[AES256_GCM,data:C+Sm1knO2EkqdOLnSytL,iv:m2ac1mB357D6qIiF6c48iWezWDDSXpw9vPp33YNVTR8=,tag:yaj50K2Lzjg2jRxifXpdAQ==,type:str]
        - name: add-policy-postgres16
          op: admin/policy/create
          args:
            name: postgres16-access
            policy: |
                {
                    "Version": "2012-10-17",
                    "Statement": [
                        {
                            "Effect": "Allow",
                            "Action": [
                                "s3:*"
                            ],
                            "Resource": [
                                "arn:aws:s3:::postgres16",
                                "arn:aws:s3:::postgres16/*"
                            ]
                        }
                    ]
                }
        - op: admin/policy/attach
          dependsOn:
            - add-user-postgres16
            - add-policy-postgres16
          args:
            policy: postgres16-access
            user: postgres16
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1u006cywqm39pr9zgh2hn0svnry5gs2ayhrtxucz77qc7j88kmqzqxtxz0t
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB0ZzdLWlZKTFBqRDBwS3Ro
            OEZBR2pjRFkzZmNvZDZtMTBTNDErTnVKVTNFClNPVWRqV29mOHJmYWFEMm1ieGVa
            MWRmbzRQWnFJNldsTG1ScVZaemo2OUUKLS0tIHZZOUZDeHBaZU1RUzBDMHpuSldK
            cHE1WFhqbzBhSjNHbGdvQWNNUGZ6bE0KwkWuWq0RET24obJzzI2MR/iTNGq7wb0t
            weCAmsPBQYYVA+iVooT2QKR53T9ahGCAsjybzrxsWDeelNyM4p3rAg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-06-03T03:15:06Z"
    mac: ENC[AES256_GCM,data:epZvacJ8kKOwVJYqVmXz/zxNEzQitGOvauBIJGZQAhc8vd6VotSbr8nY8skMYMx7VJrFVD90XHyIJBnkfckXCObgQ7dYFGODqX8f+jitZbYg+yXW+1xa7oP5rMB7SStAp0526tXoiyBCJH9ixXojKeOdFlV9FgkDLgz9vfRq/RE=,iv:juYSTxzDBUY9zhqwl41FWY5TBVLE+P3ZSi50Vot/j/k=,tag:xblDc8xsoB8vH5bjwA2iYw==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|password)$
    version: 3.8.1
